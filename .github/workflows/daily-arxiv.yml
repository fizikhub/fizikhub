# FizikHub Daily ArXiv Automation
# Her gÃ¼n TÃ¼rkiye saatiyle 06:00'da Ã§alÄ±ÅŸÄ±r ve fizik haberlerini Ã§eker

name: Daily ArXiv Physics News

on:
  schedule:
    # Her gÃ¼n saat 03:00 UTC (TÃ¼rkiye saatiyle 06:00)
    - cron: '0 3 * * *'
  
  # Manuel tetikleme iÃ§in (test amaÃ§lÄ±)
  workflow_dispatch:

jobs:
  fetch-and-publish:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: ðŸ“¦ Install Dependencies
        run: npm ci

      - name: ðŸ”§ Install Additional Dependencies
        run: npm install @google/generative-ai @supabase/supabase-js tsx

      - name: ðŸš€ Run ArXiv Bot
        env:
          NEXT_PUBLIC_SUPABASE_URL: ${{ secrets.NEXT_PUBLIC_SUPABASE_URL }}
          SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
          GOOGLE_GENERATIVE_AI_API_KEY: ${{ secrets.GOOGLE_GENERATIVE_AI_API_KEY }}
          ARXIV_BOT_AUTHOR_ID: ${{ secrets.ARXIV_BOT_AUTHOR_ID }}
        run: npx tsx scripts/daily-arxiv.ts

      - name: ðŸ“Š Job Summary
        run: |
          echo "## ðŸŽ‰ ArXiv Bot Ã‡alÄ±ÅŸtÄ±rÄ±ldÄ±" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“… Tarih: $(date)" >> $GITHUB_STEP_SUMMARY
          echo "- âœ… Ä°ÅŸlem tamamlandÄ±" >> $GITHUB_STEP_SUMMARY
